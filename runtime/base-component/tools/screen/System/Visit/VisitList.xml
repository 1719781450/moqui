<?xml version="1.0" encoding="UTF-8"?>
<!--
This is free and unencumbered software released into the public domain.
For specific language governing permissions and limitations refer to
the LICENSE.md file or http://unlicense.org
-->
<screen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="http://moqui.org/xsd/xml-screen-1.5.xsd">

    <transition name="visitDetail"><default-response url="../VisitDetail"/></transition>
    <transition name="userAccountDetail"><default-response url="//system/Security/UserAccountDetail"/></transition>

    <actions>
        <entity-find entity-name="moqui.server.Visit" list="visitList">
            <search-form-inputs default-order-by="-fromDate"/>
        </entity-find>
    </actions>
    <widgets>
        <form-list name="VisitList" list="visitList" skip-form="true">
            <row-actions>
                <entity-find-count entity-name="moqui.server.ArtifactHit" count-field="hitCount">
                    <econdition field-name="visitId"/></entity-find-count>
            </row-actions>
            <field name="fromDate">
                <header-field show-order-by="true"><text-find hide-options="true" size="16"/></header-field>
                <default-field><display/></default-field>
            </field>
            <field name="visitId">
                <header-field show-order-by="true"><text-find hide-options="true" size="6"/></header-field>
                <default-field><link text="${visitId}" url="visitDetail" link-type="anchor"><parameter name="visitId"/></link></default-field>
            </field>
            <field name="visitorId">
                <header-field show-order-by="true"><text-find hide-options="true" size="6"/></header-field>
                <default-field><display/></default-field>
            </field>
            <field name="userId">
                <header-field show-order-by="true"><text-find hide-options="true" size="6"/></header-field>
                <default-field>
                    <display-entity entity-name="moqui.security.UserAccount" text="${userFullName} [${username}]"/>
                    <link url="userAccountDetail" text="${userId}" link-type="anchor" condition="userId"/>
                </default-field>
            </field>
            <field name="serverIpAddress">
                <header-field title="Server IP"><text-find hide-options="true" size="8"/></header-field>
                <default-field><display/></default-field>
            </field>
            <field name="clientIpAddress">
                <header-field title="Client IP"><text-find hide-options="true" size="8"/></header-field>
                <default-field><display/></default-field>
            </field>
            <field name="initialRequest">
                <header-field show-order-by="true"><text-find hide-options="true" size="20"/></header-field>
                <default-field><display/></default-field>
            </field>
            <field name="hitCount"><default-field><display/></default-field></field>
            <field name="find"><header-field title="Find"><submit/></header-field></field>
        </form-list>
    </widgets>
</screen>
