<?xml version="1.0" encoding="UTF-8"?>
<!--
This is free and unencumbered software released into the public domain.
For specific language governing permissions and limitations refer to
the LICENSE.md file or http://unlicense.org
-->
<screen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="http://moqui.org/xsd/xml-screen-1.5.xsd"
        default-menu-title="Items" default-menu-index="2">
    
    <parameter name="exampleId" required="true"/>

    <transition name="createExampleItem">
        <service-call name="org.moqui.example.ExampleServices.create#ExampleItem" web-send-json-response="true"/>
        <default-response type="none"/>
    </transition>
    <transition name="editExampleItemList"><default-response url="../EditExampleItemList"/></transition>

    <actions>
        <entity-find entity-name="moqui.basic.UomAndType" list="allUomAndTypeList">
            <econdition field-name="uomTypeEnumId" operator="not-equals" value="UT_CURRENCY_MEASURE"/>
            <order-by field-name="typeDescription"/>
            <order-by field-name="description"/>
        </entity-find>
    </actions>
    <widgets>
        <container-dialog id="AddItemDialog" button-text="Add Item">
            <form-single name="AddExampleItem" transition="createExampleItem" background-submit="true"
                    background-reload-id="EditExampleItemListContainer" background-message="Example item added">
                <auto-fields-service service-name="create#ExampleItem"/>
                <field name="exampleId"><default-field><hidden/></default-field></field>
                <field name="exampleItemSeqId"><default-field><ignored/><!-- this will be auto-sequenced --></default-field></field>
                <field name="amountUomId">
                    <default-field title="UOM"><drop-down allow-empty="true">
                        <list-options list="allUomAndTypeList" key="${uomId}" text="${typeDescription}: ${description} (${abbreviation})"/>
                    </drop-down></default-field>
                </field>
                <field name="submitButton"><default-field title="Add"><submit confirmation="Really Add?"/></default-field></field>
            </form-single>
        </container-dialog>

        <dynamic-container id="EditExampleItemListContainer" transition="editExampleItemList"/>
    </widgets>
</screen>
